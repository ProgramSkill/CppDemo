# std::list è¯¦ç»†è§£æ

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
3. [æˆå‘˜å‡½æ•°è¯¦è§£](#æˆå‘˜å‡½æ•°è¯¦è§£)
4. [æ—¶é—´å¤æ‚åº¦](#æ—¶é—´å¤æ‚åº¦)
5. [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
6. [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ¦‚è¿°

`std::list`æ˜¯C++æ ‡å‡†åº“çš„**åŒå‘é“¾è¡¨å®¹å™¨**ï¼Œæ”¯æŒä»»æ„ä½ç½®çš„å¿«é€Ÿæ’å…¥åˆ é™¤ï¼ŒåŸºäºèŠ‚ç‚¹æŒ‡é’ˆå®ç°ã€‚

### å®šä¹‰ä½ç½®

```cpp
#include <list>
```

### æ¨¡æ¿å£°æ˜

```cpp
template<class T, class Allocator = std::allocator<T>>
class list;
```

- **T**: å…ƒç´ ç±»å‹
- **Allocator**: å†…å­˜åˆ†é…å™¨

### ä¸ºä»€ä¹ˆé€‰æ‹© std::listï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸ“¦ std::list çš„ä¼˜åŠ¿                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ä»»æ„ä½ç½®æ“ä½œï¼šO(1)æ’å…¥/åˆ é™¤                â”‚
â”‚ âœ… è¿­ä»£å™¨ç¨³å®šï¼šæ“ä½œä¸ä½¿è¿­ä»£å™¨å¤±æ•ˆ             â”‚
â”‚ âœ… åŒå‘éå†ï¼šæ”¯æŒå‰å‘å’Œåå‘éå†               â”‚
â”‚ âœ… é“¾è¡¨ç‰¹æœ‰ï¼šspliceã€removeç­‰æ“ä½œ             â”‚
â”‚ âœ… å†…å­˜çµæ´»ï¼šåŠ¨æ€åˆ†é…ï¼Œæ— éœ€è¿ç»­å†…å­˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | std::vector | std::list | std::deque |
|------|-------------|-----------|-----------|
| åº•å±‚å®ç° | åŠ¨æ€æ•°ç»„ | åŒå‘é“¾è¡¨ | åŒç«¯é˜Ÿåˆ— |
| éšæœºè®¿é—® | âœ… O(1) | âŒ O(n) | âœ… O(1) |
| ä»»æ„ä½ç½®æ’å…¥/åˆ é™¤ | O(n) | **O(1)** | O(n) |
| è¿­ä»£å™¨ç¨³å®š | âŒ å¯èƒ½å¤±æ•ˆ | âœ… ç¨³å®š | âŒ å¯èƒ½å¤±æ•ˆ |
| å†…å­˜è¿ç»­ | âœ… | âŒ | âŒ |

## æˆå‘˜å‡½æ•°è¯¦è§£

### æ„é€ å‡½æ•°

```cpp
// 1. é»˜è®¤æ„é€ 
std::list<int> l1;

// 2. æŒ‡å®šå¤§å°æ„é€ 
std::list<int> l2(5);        // 5ä¸ªé»˜è®¤å€¼

// 3. æŒ‡å®šå¤§å°å’Œå€¼æ„é€ 
std::list<int> l3(5, 10);    // 5ä¸ª10

// 4. èŒƒå›´æ„é€ 
std::vector<int> v = {1, 2, 3};
std::list<int> l4(v.begin(), v.end());

// 5. åˆå§‹åŒ–åˆ—è¡¨æ„é€ 
std::list<int> l5 = {1, 2, 3, 4, 5};

// 6. æ‹·è´æ„é€ 
std::list<int> l6(l5);
```

### å…ƒç´ è®¿é—®

| å‡½æ•° | å¤æ‚åº¦ | è¯´æ˜ |
|------|--------|------|
| `front()` | O(1) | è®¿é—®é¦–å…ƒç´  |
| `back()` | O(1) | è®¿é—®å°¾å…ƒç´  |
| `begin()` / `end()` | O(1) | åŒå‘è¿­ä»£å™¨ |
| `rbegin()` / `rend()` | O(1) | åå‘è¿­ä»£å™¨ |

```cpp
std::list<int> l = {10, 20, 30};

// è®¿é—®é¦–å°¾å…ƒç´ 
int first = l.front();  // 10
int last = l.back();    // 30

// âŒ ä¸æ”¯æŒéšæœºè®¿é—®
// int mid = l[1];       // ç¼–è¯‘é”™è¯¯
// int mid = l.at(1);    // ç¼–è¯‘é”™è¯¯
```

### ä¿®æ”¹æ“ä½œ

| å‡½æ•° | å¤æ‚åº¦ | è¯´æ˜ |
|------|--------|------|
| `push_front(val)` | O(1) | å¤´éƒ¨æ’å…¥ |
| `push_back(val)` | O(1) | å°¾éƒ¨æ’å…¥ |
| `pop_front()` | O(1) | å¤´éƒ¨åˆ é™¤ |
| `pop_back()` | O(1) | å°¾éƒ¨åˆ é™¤ |
| `insert(it, val)` | O(1) | åœ¨itå‰æ’å…¥ |
| `erase(it)` | O(1) | åˆ é™¤itä½ç½® |

```cpp
std::list<int> l = {1, 2, 3};

// åŒç«¯æ“ä½œ
l.push_front(0);        // {0, 1, 2, 3}
l.push_back(4);         // {0, 1, 2, 3, 4}
l.pop_front();          // {1, 2, 3, 4}
l.pop_back();           // {1, 2, 3}

// ä»»æ„ä½ç½®æ’å…¥
auto it = l.begin();
l.insert(it, 99);       // {99, 1, 2, 3}
l.insert(it, 3, 100);   // {100, 100, 100, 99, 1, 2, 3}

// ä»»æ„ä½ç½®åˆ é™¤
l.erase(it);            // åˆ é™¤itä½ç½®
l.erase(l.begin(), l.end());  // åˆ é™¤èŒƒå›´
```

### é“¾è¡¨ç‰¹æœ‰æ“ä½œ

| å‡½æ•° | å¤æ‚åº¦ | è¯´æ˜ |
|------|--------|------|
| `remove(val)` | O(n) | åˆ é™¤æ‰€æœ‰ç­‰äºvalçš„å…ƒç´  |
| `remove_if(pred)` | O(n) | åˆ é™¤æ»¡è¶³æ¡ä»¶çš„å…ƒç´  |
| `unique()` | O(n) | åˆ é™¤è¿ç»­é‡å¤å…ƒç´  |
| `reverse()` | O(n) | åè½¬é“¾è¡¨ |
| `sort()` | O(n log n) | æ’åº |
| `splice(it, other)` | O(1) | æ‹¼æ¥é“¾è¡¨ |

```cpp
std::list<int> l = {1, 2, 2, 3, 3, 3, 4};

// åˆ é™¤æ“ä½œ
l.remove(2);                // {1, 3, 3, 3, 4}
l.remove_if([](int n) { return n % 2 == 0; });  // åˆ é™¤å¶æ•°
l.unique();                 // {1, 3, 4}
l.reverse();                // {4, 3, 1}
l.sort();                   // {1, 3, 4}

// æ‹¼æ¥é“¾è¡¨
std::list<int> l1 = {1, 2, 3};
std::list<int> l2 = {4, 5, 6};
auto it = l1.begin();
++it;
l1.splice(it, l2);  // l1 = {1, 4, 5, 6, 2, 3}, l2 = ç©º
```

---

## æ—¶é—´å¤æ‚åº¦

| æ“ä½œ | å¤æ‚åº¦ |
|------|--------|
| è®¿é—®é¦–å°¾ | **O(1)** |
| ä»»æ„ä½ç½®æ’å…¥/åˆ é™¤ | **O(1)** |
| è®¿é—®ä¸­é—´å…ƒç´  | **O(n)** - éœ€éå† |
| æ’åºï¼ˆä¸“ç”¨ï¼‰ | **O(n log n)** |
| size() | **O(1)** - C++11èµ· |

---

## ä½¿ç”¨åœºæ™¯

### 1. é¢‘ç¹åœ¨ä¸­é—´æ’å…¥åˆ é™¤

```cpp
std::list<int> l = {1, 2, 3, 4, 5};

// åœ¨ä¸­é—´ä½ç½®æ’å…¥
auto it = l.begin();
std::advance(it, 2);
l.insert(it, 99);  // O(1)ï¼Œæ¯”vectorçš„O(n)å¿«å¾—å¤š
```

### 2. éœ€è¦ç¨³å®šçš„è¿­ä»£å™¨

```cpp
std::list<int> l = {1, 2, 3, 4, 5};

// è¿­ä»£è¿‡ç¨‹ä¸­æ’å…¥ï¼Œè¿­ä»£å™¨ä»ç„¶æœ‰æ•ˆ
for (auto it = l.begin(); it != l.end(); ++it) {
    l.insert(it, *it * 2);  // itä»ç„¶æœ‰æ•ˆ
}
```

### 3. å®ç°LRUç¼“å­˜

```cpp
class LRUCache {
    std::list<int> cache;
    const int CAPACITY = 100;

public:
    int access(int page) {
        cache.remove(page);      // O(n) æŸ¥æ‰¾ï¼ŒO(1) åˆ é™¤
        cache.push_front(page);  // O(1) æ’å…¥

        if (cache.size() > CAPACITY) {
            cache.pop_back();    // O(1) åˆ é™¤
        }
        return page;
    }
};
```

### 4. é“¾è¡¨ç®—æ³•å®ç°

```cpp
std::list<int> l = {1, 2, 3, 4, 5};

// åè½¬
l.reverse();  // {5, 4, 3, 2, 1}

// æ’åº
l.sort();     // {1, 2, 3, 4, 5}

// å»é‡
l.unique();   // åˆ é™¤è¿ç»­é‡å¤å…ƒç´ 
```

---

## æ³¨æ„äº‹é¡¹

### 1. æ— éšæœºè®¿é—®

```cpp
std::list<int> l = {1, 2, 3, 4, 5};

// âŒ ç¼–è¯‘é”™è¯¯
// int x = l[2];
// int y = l.at(2);

// âœ… ä½¿ç”¨è¿­ä»£å™¨
auto it = l.begin();
std::advance(it, 2);
int z = *it;
```

### 2. è¿­ä»£å™¨ç¨³å®šæ€§

```cpp
std::list<int> l = {1, 2, 3, 4, 5};

auto it = l.begin();
++it;  // æŒ‡å‘2

l.insert(it, 99);  // âœ… it ä»ç„¶æœ‰æ•ˆï¼ŒæŒ‡å‘2
l.erase(it);       // âœ… åˆ é™¤åï¼Œè¿”å›ä¸‹ä¸€ä¸ªæœ‰æ•ˆè¿­ä»£å™¨
```

### 3. æ€§èƒ½è€ƒè™‘

```cpp
std::list<int> l;

// âŒ ä½æ•ˆï¼šéœ€è¦éå†åˆ°æœ«å°¾
for (int i = 0; i < 1000; ++i) {
    l.push_back(i);  // O(1) ä½†éœ€è¦éå†
}

// âœ… é«˜æ•ˆï¼šå¤´éƒ¨æ“ä½œ
for (int i = 0; i < 1000; ++i) {
    l.push_front(i);  // O(1)
}
```

### 4. ç¼“å­˜ä¸å‹å¥½

```cpp
std::list<int> l = {1, 2, 3, 4, 5};

// list çš„èŠ‚ç‚¹åˆ†æ•£åœ¨å†…å­˜ä¸­ï¼Œç¼“å­˜å‘½ä¸­ç‡ä½
for (int x : l) {
    // æ¯æ¬¡è®¿é—®å¯èƒ½å¯¼è‡´ç¼“å­˜æœªå‘½ä¸­
    std::cout << x;
}

// vector çš„å…ƒç´ è¿ç»­ï¼Œç¼“å­˜å‹å¥½
std::vector<int> v = {1, 2, 3, 4, 5};
for (int x : v) {
    // è¿ç»­å†…å­˜è®¿é—®ï¼Œç¼“å­˜å‘½ä¸­ç‡é«˜
    std::cout << x;
}
```

---

## å¸¸è§é—®é¢˜

### Q1: list å’Œ vector çš„åŒºåˆ«ï¼Ÿ

| ç‰¹æ€§ | std::list | std::vector |
|------|-----------|-------------|
| åº•å±‚å®ç° | åŒå‘é“¾è¡¨ | åŠ¨æ€æ•°ç»„ |
| éšæœºè®¿é—® | O(n) | O(1) |
| ä¸­é—´æ’å…¥/åˆ é™¤ | O(1) | O(n) |
| å†…å­˜è¿ç»­ | âŒ | âœ… |
| ç¼“å­˜å‹å¥½ | âŒ | âœ… |
| è¿­ä»£å™¨ç¨³å®š | âœ… | âŒ |

### Q2: list å’Œ deque çš„åŒºåˆ«ï¼Ÿ

| ç‰¹æ€§ | std::list | std::deque |
|------|-----------|-----------|
| åº•å±‚å®ç° | åŒå‘é“¾è¡¨ | åŒç«¯é˜Ÿåˆ— |
| éšæœºè®¿é—® | O(n) | O(1) |
| å¤´å°¾æ“ä½œ | O(1) | O(1) |
| ä¸­é—´æ“ä½œ | O(1) | O(n) |
| å†…å­˜è¿ç»­ | âŒ | éƒ¨åˆ† |

### Q3: ä½•æ—¶ä½¿ç”¨ listï¼Ÿ

âœ… **é€‚åˆ**ï¼š
- é¢‘ç¹åœ¨ä¸­é—´æ’å…¥åˆ é™¤
- éœ€è¦ç¨³å®šçš„è¿­ä»£å™¨
- å®ç°LRUç­‰ç¼“å­˜ç­–ç•¥
- éœ€è¦åŒå‘éå†

âŒ **ä¸é€‚åˆ**ï¼š
- éœ€è¦éšæœºè®¿é—® â†’ ä½¿ç”¨ vector/deque
- æ•°æ®é‡å° â†’ vector å¯èƒ½æ›´å¿«ï¼ˆç¼“å­˜å‹å¥½ï¼‰
- ä¸»è¦åœ¨å¤´å°¾æ“ä½œ â†’ deque æ›´ä¼˜
- éœ€è¦é«˜ç¼“å­˜å‘½ä¸­ç‡ â†’ vector

### Q4: å¦‚ä½•é«˜æ•ˆåœ°éå† listï¼Ÿ

```cpp
std::list<int> l = {1, 2, 3, 4, 5};

// æ–¹æ³•1ï¼šèŒƒå›´forå¾ªç¯ï¼ˆæ¨èï¼‰
for (int x : l) {
    std::cout << x << " ";
}

// æ–¹æ³•2ï¼šè¿­ä»£å™¨
for (auto it = l.begin(); it != l.end(); ++it) {
    std::cout << *it << " ";
}

// æ–¹æ³•3ï¼šåå‘éå†
for (auto it = l.rbegin(); it != l.rend(); ++it) {
    std::cout << *it << " ";
}
```

---

## æ€»ç»“

### ä½•æ—¶ä½¿ç”¨ std::list

âœ… **é€‚åˆ**ï¼š
- é¢‘ç¹åœ¨ä¸­é—´æ’å…¥åˆ é™¤
- éœ€è¦ç¨³å®šçš„è¿­ä»£å™¨
- å®ç°é“¾è¡¨ç®—æ³•
- éœ€è¦åŒå‘éå†

âŒ **ä¸é€‚åˆ**ï¼š
- éœ€è¦éšæœºè®¿é—® â†’ ä½¿ç”¨ vector/deque
- éœ€è¦é«˜æ€§èƒ½ â†’ vectorï¼ˆç¼“å­˜å‹å¥½ï¼‰
- ä¸»è¦åœ¨å¤´å°¾æ“ä½œ â†’ deque æ›´ä¼˜

### æœ€ä½³å®è·µ

1. **ä¼˜å…ˆä½¿ç”¨ vector** é™¤éæœ‰ç‰¹æ®Šéœ€æ±‚
2. **ä½¿ç”¨ list è¿›è¡Œé¢‘ç¹ä¸­é—´æ“ä½œ** æ—¶è·å¾—æ€§èƒ½ä¼˜åŠ¿
3. **åˆ©ç”¨è¿­ä»£å™¨ç¨³å®šæ€§** è¿›è¡Œå®‰å…¨çš„æ’å…¥åˆ é™¤
4. **ä½¿ç”¨ splice()** è¿›è¡Œé«˜æ•ˆçš„é“¾è¡¨æ‹¼æ¥
5. **é¿å…é¢‘ç¹ size() è°ƒç”¨** åœ¨ C++11 å‰

---

## å‚è€ƒæ–‡æ¡£
- [cppreference - std::list](https://en.cppreference.com/w/cpp/container/list)

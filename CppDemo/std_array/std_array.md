# std::array è¯¦ç»†è§£æ

## ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
3. [ä¸Cæ•°ç»„çš„å¯¹æ¯”](#ä¸cæ•°ç»„çš„å¯¹æ¯”)
4. [æˆå‘˜å‡½æ•°è¯¦è§£](#æˆå‘˜å‡½æ•°è¯¦è§£)
5. [æ—¶é—´å¤æ‚åº¦](#æ—¶é—´å¤æ‚åº¦)
6. [ä½¿ç”¨åœºæ™¯](#ä½¿ç”¨åœºæ™¯)
7. [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
8. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ¦‚è¿°

`std::array` æ˜¯ C++11 å¼•å…¥çš„**åºåˆ—å®¹å™¨**ï¼Œå®ƒå°è£…äº†å›ºå®šå¤§å°çš„æ•°ç»„ï¼Œæä¾›äº†æ›´å®‰å…¨ã€æ›´ä¾¿æ·çš„æ¥å£ã€‚

### å®šä¹‰ä½ç½®

```cpp
#include <array>
```

### æ¨¡æ¿å£°æ˜

```cpp
template <class T, size_t N>
class array;
```

- **T**: å…ƒç´ ç±»å‹
- **N**: æ•°ç»„å¤§å°ï¼ˆç¼–è¯‘æ—¶å¸¸é‡ï¼‰

### ä¸ºä»€ä¹ˆé€‰æ‹© std::arrayï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ“¦ std::array çš„ä¼˜åŠ¿                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… å›ºå®šå¤§å°ï¼šç¼–è¯‘æ—¶ç¡®å®šï¼Œæ— åŠ¨æ€åˆ†é…          â”‚
â”‚ âœ… æ ˆä¸Šåˆ†é…ï¼šä¸Cæ•°ç»„ç›¸åŒçš„æ€§èƒ½                â”‚
â”‚ âœ… éšæœºè®¿é—®ï¼šO(1) æ—¶é—´è®¿é—®ä»»æ„å…ƒç´             â”‚
â”‚ âœ… å®‰å…¨æ¥å£ï¼šæä¾›è¾¹ç•Œæ£€æŸ¥çš„ at()              â”‚
â”‚ âœ… STLå…¼å®¹ï¼šæ”¯æŒè¿­ä»£å™¨å’Œç®—æ³•                  â”‚
â”‚ âœ… ä¸ä¼šé€€åŒ–ï¼šä¿æŒç±»å‹ä¿¡æ¯                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒç‰¹æ€§

### 1. å›ºå®šå¤§å°

```cpp
std::array<int, 5> arr = {1, 2, 3, 4, 5};
// arr.size() å§‹ç»ˆä¸º 5
// ä¸èƒ½å¢åŠ æˆ–å‡å°‘å¤§å°
```

### 2. æ ˆä¸Šåˆ†é…

```cpp
std::array<int, 100> arr;  // åœ¨æ ˆä¸Šåˆ†é…
// ç­‰ä»·äº int arr[100];
// ä½†æ›´å®‰å…¨ã€æ›´åŠŸèƒ½ä¸°å¯Œ
```

### 3. ä¸ STL ç®—æ³•å…¼å®¹

```cpp
std::array<int, 5> arr = {3, 1, 4, 1, 5};
std::sort(arr.begin(), arr.end());  // å¯ä»¥ä½¿ç”¨ STL ç®—æ³•
```

---

## ä¸Cæ•°ç»„çš„å¯¹æ¯”

### åŠŸèƒ½å¯¹æ¯”

| ç‰¹æ€§ | Cæ•°ç»„ | std::array |
|------|-------|------------|
| å¤§å°ä¿¡æ¯ | âŒ é€€åŒ–ä¸ºæŒ‡é’ˆ | âœ… æœ‰ size() |
| è¾¹ç•Œæ£€æŸ¥ | âŒ æ—  | âœ… at() æä¾› |
| è¿­ä»£å™¨æ”¯æŒ | âŒ æ—  | âœ… å®Œæ•´æ”¯æŒ |
| STLç®—æ³•å…¼å®¹ | âš ï¸ éƒ¨åˆ†å…¼å®¹ | âœ… å®Œå…¨å…¼å®¹ |
| ç±»å‹å®‰å…¨ | âš ï¸ å®¹æ˜“é€€åŒ– | âœ… ç±»å‹ä¿æŒ |
| æ€§èƒ½ | âœ… æœ€ä¼˜ | âœ… é›¶å¼€é”€æŠ½è±¡ |

### ç¤ºä¾‹å¯¹æ¯”

```cpp
// C æ•°ç»„
int c_arr[5] = {1, 2, 3, 4, 5};
size_t n = sizeof(c_arr) / sizeof(c_arr[0]);  // æ‰‹åŠ¨è®¡ç®—å¤§å°
// int x = c_arr[10];  // æœªå®šä¹‰è¡Œä¸ºï¼Œæ— æ£€æŸ¥

// std::array
std::array<int, 5> arr = {1, 2, 3, 4, 5};
size_t n = arr.size();  // ç›´æ¥è·å–å¤§å°
// int x = arr.at(10);  // æŠ›å‡º std::out_of_range å¼‚å¸¸
```

---

## æˆå‘˜å‡½æ•°è¯¦è§£

### å…ƒç´ è®¿é—®

| å‡½æ•° | å¤æ‚åº¦ | è¯´æ˜ |
|------|--------|------|
| `operator[]` | O(1) | ä¸å¸¦è¾¹ç•Œæ£€æŸ¥ |
| `at()` | O(1) | å¸¦è¾¹ç•Œæ£€æŸ¥ |
| `front()` | O(1) | è®¿é—®é¦–å…ƒç´  |
| `back()` | O(1) | è®¿é—®å°¾å…ƒç´  |
| `data()` | O(1) | è¿”å›æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ |

```cpp
std::array<int, 5> arr = {10, 20, 30, 40, 50};

// operator[] - ä¸æ£€æŸ¥è¾¹ç•Œ
int x = arr[2];     // 30

// at() - æ£€æŸ¥è¾¹ç•Œ
int y = arr.at(2);  // 30
// int z = arr.at(10); // æŠ›å‡º std::out_of_range

// front() å’Œ back()
int first = arr.front();  // 10
int last = arr.back();    // 50

// data() - è¿”å›åº•å±‚æŒ‡é’ˆ
int* ptr = arr.data();    // ç­‰ä»·äº &arr[0]
```

### è¿­ä»£å™¨

| å‡½æ•° | è¯´æ˜ |
|------|------|
| `begin()` / `end()` | æ­£å‘è¿­ä»£å™¨ |
| `cbegin()` / `cend()` | const æ­£å‘è¿­ä»£å™¨ |
| `rbegin()` / `rend()` | åå‘è¿­ä»£å™¨ |
| `crbegin()` / `crend()` | const åå‘è¿­ä»£å™¨ |

```cpp
std::array<int, 5> arr = {1, 2, 3, 4, 5};

// æ­£å‘éå†
for (auto it = arr.begin(); it != arr.end(); ++it) {
    std::cout << *it << " ";
}

// èŒƒå›´ for å¾ªç¯
for (const auto& elem : arr) {
    std::cout << elem << " ";
}

// åå‘éå†
for (auto it = arr.rbegin(); it != arr.rend(); ++it) {
    std::cout << *it << " ";
}
```

### å®¹é‡æ“ä½œ

| å‡½æ•° | å¤æ‚åº¦ | è¯´æ˜ |
|------|--------|------|
| `size()` | O(1) | è¿”å›å…ƒç´ æ•°é‡ |
| `max_size()` | O(1) | è¿”å›æœ€å¤§å¯èƒ½å¤§å° |
| `empty()` | O(1) | æ£€æŸ¥æ˜¯å¦ä¸ºç©º |

```cpp
std::array<int, 5> arr;

arr.size();      // 5
arr.max_size();  // 5
arr.empty();     // falseï¼ˆå¤§å°ä¸º5ï¼‰

std::array<int, 0> empty_arr;
empty_arr.empty();  // true
```

### ä¿®æ”¹æ“ä½œ

| å‡½æ•° | å¤æ‚åº¦ | è¯´æ˜ |
|------|--------|------|
| `fill()` | O(n) | ç”¨ç»™å®šå€¼å¡«å……æ‰€æœ‰å…ƒç´  |
| `swap()` | O(n) | äº¤æ¢ä¸¤ä¸ªæ•°ç»„çš„å†…å®¹ |

```cpp
std::array<int, 5> arr;

// fill - å¡«å……æ‰€æœ‰å…ƒç´ 
arr.fill(42);  // {42, 42, 42, 42, 42}

// swap - äº¤æ¢å†…å®¹
std::array<int, 5> other = {1, 2, 3, 4, 5};
arr.swap(other);
// arr ç°åœ¨æ˜¯ {1, 2, 3, 4, 5}
// other ç°åœ¨æ˜¯ {42, 42, 42, 42, 42}
```

---

## æ—¶é—´å¤æ‚åº¦

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | è¯´æ˜ |
|------|-----------|------|
| éšæœºè®¿é—® `[]`, `at()` | **O(1)** | å¸¸æ•°æ—¶é—´ |
| è®¿é—®é¦–å°¾ `front()`, `back()` | **O(1)** | å¸¸æ•°æ—¶é—´ |
| éå† | O(n) | éœ€è¦è®¿é—®æ‰€æœ‰å…ƒç´  |
| `fill()` | O(n) | éœ€è¦è®¾ç½®æ‰€æœ‰å…ƒç´  |
| `swap()` | O(n) | éœ€è¦äº¤æ¢æ‰€æœ‰å…ƒç´  |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ“Š æ€§èƒ½ç‰¹ç‚¹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ‰€æœ‰æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ C æ•°ç»„å®Œå…¨ç›¸åŒ        â”‚
â”‚ é›¶å¼€é”€æŠ½è±¡ï¼ˆzero-overhead abstractionï¼‰      â”‚
â”‚ ç¼–è¯‘å™¨ä¼˜åŒ–åä¸æ‰‹å†™ C æ•°ç»„ä»£ç ç­‰ä»·            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä½¿ç”¨åœºæ™¯

### 1. å¤§å°å·²çŸ¥çš„æ•°ç»„

```cpp
// ä¸‰ç»´å‘é‡
std::array<double, 3> vec3 = {1.0, 2.0, 3.0};

// å››å…ƒæ•°
std::array<float, 4> quaternion = {1.0f, 0.0f, 0.0f, 0.0f};

// RGB é¢œè‰²
std::array<uint8_t, 3> rgb = {255, 128, 0};
```

### 2. éœ€è¦ä¼ é€’æ•°ç»„çš„å‡½æ•°

```cpp
// C æ•°ç»„æ–¹å¼ï¼ˆä¼šä¸¢å¤±å¤§å°ä¿¡æ¯ï¼‰
void process_c(int arr[], size_t size);

// std::array æ–¹å¼ï¼ˆä¿ç•™å¤§å°ä¿¡æ¯ï¼‰
void process_cpp(std::array<int, 10> arr);

// æ›´å¥½çš„æ–¹å¼ï¼šä½¿ç”¨å¼•ç”¨é¿å…æ‹·è´
void process_cpp_ref(const std::array<int, 10>& arr);
```

### 3. éœ€è¦ä½¿ç”¨ STL ç®—æ³•

```cpp
std::array<int, 5> arr = {5, 2, 8, 1, 9};

// æ’åº
std::sort(arr.begin(), arr.end());

// æŸ¥æ‰¾
auto it = std::find(arr.begin(), arr.end(), 8);

// ç´¯åŠ 
int sum = std::accumulate(arr.begin(), arr.end(), 0);
```

### 4. å¤šç»´æ•°ç»„

```cpp
// äºŒç»´æ•°ç»„ï¼ˆ3x4çŸ©é˜µï¼‰
using Matrix3x4 = std::array<std::array<int, 4>, 3>;
Matrix3x4 matrix = {{
    {1, 2, 3, 4},
    {5, 6, 7, 8},
    {9, 10, 11, 12}
}};

// è®¿é—®å…ƒç´ 
int value = matrix[1][2];  // 7
```

### 5. å…ƒç»„æ¥å£

```cpp
std::array<int, 3> arr = {1, 2, 3};

// å¯ä»¥åƒ tuple ä¸€æ ·è®¿é—®
int x = std::get<0>(arr);  // 1
int y = std::get<1>(arr);  // 2
int z = std::get<2>(arr);  // 3

// è·å–å…ƒç´ ç±»å‹
using ElementType = std::tuple_element<0, decltype(arr)>::type;  // int

// è·å–å¤§å°
constexpr size_t size = std::tuple_size<decltype(arr)>::value;  // 3
```

---

## æ³¨æ„äº‹é¡¹

### 1. å¤§å°å¿…é¡»æ˜¯ç¼–è¯‘æ—¶å¸¸é‡

```cpp
const int n = 5;
std::array<int, n> arr1;  // âœ… n æ˜¯ç¼–è¯‘æ—¶å¸¸é‡

int m = 5;
// std::array<int, m> arr2;  // âŒ m ä¸æ˜¯ç¼–è¯‘æ—¶å¸¸é‡

constexpr int k = 5;
std::array<int, k> arr3;  // âœ… k æ˜¯ç¼–è¯‘æ—¶å¸¸é‡
```

### 2. é›¶å¤§å°æ•°ç»„æ˜¯åˆæ³•çš„

```cpp
std::array<int, 0> empty_arr;  // åˆæ³•ä½†å¾ˆå°‘ä½¿ç”¨
empty_arr.size();   // 0
empty_arr.empty();  // true
// empty_arr[0];    // æœªå®šä¹‰è¡Œä¸ºï¼
```

### 3. ä¸èƒ½åŠ¨æ€æ”¹å˜å¤§å°

```cpp
std::array<int, 5> arr = {1, 2, 3, 4, 5};
// arr.push_back(6);  // âŒ ç¼–è¯‘é”™è¯¯
// arr.resize(10);    // âŒ ç¼–è¯‘é”™è¯¯
// ä¸èƒ½åƒ vector ä¸€æ ·åŠ¨æ€å¢é•¿
```

### 4. åˆå§‹åŒ–åˆ—è¡¨çš„ä½¿ç”¨

```cpp
// é»˜è®¤åˆå§‹åŒ–
std::array<int, 5> arr1;  // å€¼æœªå®šä¹‰ï¼ˆåŸºæœ¬ç±»å‹ï¼‰

// å€¼åˆå§‹åŒ–
std::array<int, 5> arr2{};  // æ‰€æœ‰å…ƒç´ åˆå§‹åŒ–ä¸º 0

// æä¾›åˆå§‹å€¼
std::array<int, 5> arr3 = {1, 2, 3};  // {1, 2, 3, 0, 0}

// èšåˆåˆå§‹åŒ–
std::array<int, 5> arr4{1, 2, 3, 4, 5};  // {1, 2, 3, 4, 5}
```

---

## å¸¸è§é—®é¢˜

### Q1: std::array å’Œ C++11 çš„åˆå§‹åŒ–åˆ—è¡¨

```cpp
// âœ… æ­£ç¡®
std::array<int, 3> arr1 = {1, 2, 3};
std::array<int, 3> arr2{1, 2, 3};

// âŒ é”™è¯¯ï¼šä¸èƒ½çœç•¥å¤§å°
// auto arr3 = {1, 2, 3};  // æ˜¯ std::initializer_list
```

### Q2: std::array å’Œ std::vector çš„é€‰æ‹©

| ç‰¹æ€§ | std::array | std::vector |
|------|-----------|-------------|
| å¤§å° | å›ºå®šï¼ˆç¼–è¯‘æ—¶ï¼‰ | åŠ¨æ€ï¼ˆè¿è¡Œæ—¶ï¼‰ |
| å†…å­˜ä½ç½® | æ ˆä¸Š | å †ä¸Š |
| æ€§èƒ½ | æœ€ä¼˜ | ç¨æœ‰å¼€é”€ |
| ä½¿ç”¨åœºæ™¯ | å¤§å°å·²çŸ¥ | å¤§å°æœªçŸ¥ |

**å»ºè®®**ï¼š
- å¤§å°å·²çŸ¥ä¸”å›ºå®š â†’ `std::array`
- å¤§å°æœªçŸ¥æˆ–éœ€å˜åŒ– â†’ `std::vector`

### Q3: å¦‚ä½•ä¼ é€’ std::array ç»™å‡½æ•°ï¼Ÿ

```cpp
// âŒ æŒ‰å€¼ä¼ é€’ï¼ˆæ‹·è´æ•´ä¸ªæ•°ç»„ï¼‰
void func1(std::array<int, 100> arr);

// âœ… æŒ‰å¼•ç”¨ä¼ é€’ï¼ˆé¿å…æ‹·è´ï¼‰
void func2(const std::array<int, 100>& arr);  // ä¸ä¿®æ”¹
void func3(std::array<int, 100>& arr);        // å¯ä¿®æ”¹

// âœ… æŒ‰æŒ‡é’ˆä¼ é€’ï¼ˆCé£æ ¼ï¼‰
void func4(int (*arr)[100]);
void func5(std::array<int, 100>* arr);
```

### Q4: std::array çš„æ€§èƒ½å¼€é”€ï¼Ÿ

```cpp
std::array<int, 100> arr1;
int arr2[100];

// è¿™ä¸¤ä¸ªåœ¨å†…å­˜å¸ƒå±€å’Œæ€§èƒ½ä¸Šå®Œå…¨ç›¸åŒ
// sizeof(arr1) == sizeof(arr2) == 400 å­—èŠ‚

// ç¼–è¯‘å™¨ä¼˜åŒ–åï¼Œä»£ç æ€§èƒ½å®Œå…¨ä¸€è‡´
```

**ç»“è®º**ï¼š`std::array` æ˜¯**é›¶å¼€é”€æŠ½è±¡**ï¼Œæ€§èƒ½ä¸ C æ•°ç»„å®Œå…¨ç›¸åŒã€‚

### Q5: å¦‚ä½•åœ¨ç±»ä¸­ä½¿ç”¨ std::arrayï¼Ÿ

```cpp
class Matrix {
    std::array<std::array<double, 3>, 3> data;

public:
    Matrix() : data{{{0, 0, 0}, {0, 0, 0}, {0, 0, 0}}} {}

    double& operator()(size_t row, size_t col) {
        return data[row][col];
    }

    const double& operator()(size_t row, size_t col) const {
        return data[row][col];
    }
};
```

---

## æ€»ç»“

### ä½•æ—¶ä½¿ç”¨ std::array

âœ… **é€‚åˆ**ï¼š
- æ•°ç»„å¤§å°åœ¨ç¼–è¯‘æ—¶å·²çŸ¥
- éœ€è¦æ ˆä¸Šåˆ†é…
- éœ€è¦è¾¹ç•Œæ£€æŸ¥
- éœ€è¦ä¸ STL ç®—æ³•é…åˆä½¿ç”¨
- æ›¿ä»£ä¸å®‰å…¨çš„ C æ•°ç»„

âŒ **ä¸é€‚åˆ**ï¼š
- éœ€è¦åŠ¨æ€å¤§å° â†’ ä½¿ç”¨ `std::vector`
- å¤§å°éå¸¸å¤§ â†’ è€ƒè™‘å †åˆ†é…

### æœ€ä½³å®è·µ

1. **ä¼˜å…ˆä½¿ç”¨ `std::array` æ›¿ä»£ C æ•°ç»„**
2. **ä½¿ç”¨ `at()` è¿›è¡Œè¾¹ç•Œæ£€æŸ¥**ï¼Œæˆ–ç¡®ä¿ç´¢å¼•æ­£ç¡®
3. **æŒ‰å¼•ç”¨ä¼ é€’**é¿å…ä¸å¿…è¦çš„æ‹·è´
4. **åˆ©ç”¨ STL ç®—æ³•**æ“ä½œæ•°ç»„
5. **ä½¿ç”¨ `auto` å’ŒèŒƒå›´ for**ç®€åŒ–ä»£ç 

---

## å‚è€ƒèµ„æ–™

- [C++ Reference - std::array](https://en.cppreference.com/w/cpp/container/array)
- [C++ Standard Library - Sequence Containers](https://en.cppreference.com/w/cpp/container)
